<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex, nofollow">
    <title>My File Archive</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .file-container {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .json-chat {
            margin-bottom: 15px;
        }
        .user {
            color: #0066cc;
            font-weight: bold;
        }
        .assistant {
            color: #009933;
        }
        .error {
            color: #cc0000;
            padding: 15px;
            border: 1px solid #ffcccc;
            background-color: #ffeeee;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        pre {
            white-space: pre-wrap;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>My File Archive</h1>
    
    <!-- Configuration Section -->
    <div id="config" style="margin-bottom: 20px; padding: 15px; background: #f0f8ff; border-radius: 5px;">
        <h2>Configuration</h2>
        <div>
            <label for="repoInput">GitHub Repository (owner/repo):</label><br>
            <input type="text" id="repoInput" value="kendiglisa/adfasdfasfs" style="width: 100%; padding: 5px; margin-bottom: 10px;">
        </div>
        <div>
            <label for="branchInput">Branch:</label><br>
            <input type="text" id="branchInput" value="main" style="width: 100%; padding: 5px; margin-bottom: 10px;">
        </div>
        <div>
            <label for="filesInput">Files to load (comma separated):</label><br>
            <input type="text" id="filesInput" value="waarchive.json,notes.txt" style="width: 100%; padding: 5px; margin-bottom: 10px;">
        </div>
        <button id="loadButton" style="padding: 8px 15px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Load Files</button>
    </div>
    
    <div id="files">
        <p class="loading">Configure and click "Load Files" to display content.</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('files');
            const loadButton = document.getElementById('loadButton');
            
            loadButton.addEventListener('click', function() {
                const repo = document.getElementById('repoInput').value.trim();
                const branch = document.getElementById('branchInput').value.trim();
                const filesInput = document.getElementById('filesInput').value.trim();
                
                if (!repo || !branch || !filesInput) {
                    showError('Please fill in all fields');
                    return;
                }
                
                const filesToLoad = filesInput.split(',').map(f => f.trim()).filter(f => f);
                loadFiles(repo, branch, filesToLoad);
            });
            
            function loadFiles(repo, branch, files) {
                container.innerHTML = '<p class="loading">Loading files...</p>';
                
                Promise.all(files.map(file => {
                    const fileUrl = `https://raw.githubusercontent.com/${repo}/${branch}/${file}`;
                    return fetch(fileUrl)
                        .then(response => {
                            if (!response.ok) throw new Error(`Failed to load ${file}: ${response.status}`);
                            return response.text().then(text => {
                                return { file, content: text, isJson: file.endsWith('.json') };
                            });
                        })
                        .catch(error => {
                            return { file, error: error.message };
                        });
                }))
                .then(results => {
                    container.innerHTML = '';
                    
                    results.forEach(result => {
                        const fileDiv = document.createElement('div');
                        fileDiv.className = 'file-container';
                        
                        const title = document.createElement('h3');
                        title.textContent = result.file;
                        fileDiv.appendChild(title);
                        
                        if (result.error) {
                            const errorDiv = document.createElement('div');
                            errorDiv.className = 'error';
                            errorDiv.textContent = `Error: ${result.error}`;
                            fileDiv.appendChild(errorDiv);
                        } else if (result.isJson) {
                            try {
                                const jsonData = JSON.parse(result.content);
                                if (jsonData.conversations) {
                                    jsonData.conversations.forEach(conversation => {
                                        const convDiv = document.createElement('div');
                                        convDiv.className = 'json-chat';
                                        
                                        if (conversation.topic || conversation.date) {
                                            const convTitle = document.createElement('h4');
                                            convTitle.textContent = `${conversation.topic || 'Conversation'} â€¢ ${conversation.date || 'No date'}`;
                                            convDiv.appendChild(convTitle);
                                        }
                                        
                                        if (conversation.messages) {
                                            conversation.messages.forEach(message => {
                                                const msgDiv = document.createElement('div');
                                                msgDiv.className = message.role;
                                                msgDiv.innerHTML = `<strong>${message.role}:</strong> ${message.content}`;
                                                convDiv.appendChild(msgDiv);
                                            });
                                        }
                                        
                                        fileDiv.appendChild(convDiv);
                                    });
                                } else {
                                    const pre = document.createElement('pre');
                                    pre.textContent = JSON.stringify(jsonData, null, 2);
                                    fileDiv.appendChild(pre);
                                }
                            } catch (e) {
                                const errorDiv = document.createElement('div');
                                errorDiv.className = 'error';
                                errorDiv.textContent = `Failed to parse JSON: ${e.message}`;
                                fileDiv.appendChild(errorDiv);
                                
                                const pre = document.createElement('pre');
                                pre.textContent = result.content;
                                fileDiv.appendChild(pre);
                            }
                        } else {
                            // Plain text file
                            const pre = document.createElement('pre');
                            pre.textContent = result.content;
                            fileDiv.appendChild(pre);
                        }
                        
                        container.appendChild(fileDiv);
                    });
                })
                .catch(error => {
                    showError('Failed to load files', error.message);
                });
            }
            
            function showError(message, details = '') {
                container.innerHTML = `
                    <div class="error">
                        <p><strong>Error:</strong> ${message}</p>
                        ${details ? `<p>${details}</p>` : ''}
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
